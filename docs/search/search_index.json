{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Vinti4Net PHP SDK","text":"<p>SDK PHP para integra\u00e7\u00e3o com o Gateway de Pagamentos RedeVinti4 / SISP (Cabo Verde).</p> <p>Este SDK oferece:</p> <ul> <li>\ud83d\udd12 Pagamentos 3DS (purchase)</li> <li>\ud83d\udd04 Pagamentos de servi\u00e7os (entidade + refer\u00eancia)</li> <li>\u26a1 Recargas</li> <li>\ud83d\udcb0 Reembolsos</li> <li>\ud83e\uddfe Interpreta\u00e7\u00e3o simplificada das respostas do SISP</li> <li>\ud83d\udce6 Simplifica\u00e7\u00e3o completa da gera\u00e7\u00e3o de formul\u00e1rios auto-submit</li> </ul>"},{"location":"#namespace","title":"Namespace","text":"<pre><code>use Erilshk\\Sisp\\Vinti4Net;\n</code></pre>"},{"location":"#fluxo-geral","title":"Fluxo geral","text":"<pre><code>graph LR\n\n    A[\"Seu Sistema\"] --&gt; B[\"Vinti4Net SDK\"]\n    B --&gt; C[\"Gera Formul\u00e1rio&lt;br/&gt;POST (auto-submit)\"]\n    C --&gt; D[\"SISP&lt;br/&gt;MPI / 3DSServer \"]\n    D --&gt; E[\"Cliente Autentica&lt;br/&gt; Dados do cart\u00e3o + Autentica\u00e7\u00e3o 3DS\"]\n    E --&gt; F[\"SISP envia POST de Retorno (Response)\"]\n    F --&gt; G[\"Vinti4Net::processResponse()\"]\n    G --&gt; H[\"Objeto Vinti4Response\"]\n    H --&gt; A</code></pre>"},{"location":"about/","title":"Sobre esta Documenta\u00e7\u00e3o","text":"<p>Bem-vindo \u00e0 documenta\u00e7\u00e3o do Vinti4Net PHP SDK, um SDK desenvolvido para facilitar a integra\u00e7\u00e3o com o sistema de pagamentos Vinti4 / SISP (Cabo Verde).</p> <p>\u26a0\ufe0f Nota Importante: Este SDK n\u00e3o \u00e9 oficial da SISP. Ele foi desenvolvido por @erilshackle para simplificar a comunica\u00e7\u00e3o com a API da SISP, mas n\u00e3o representa oficialmente a SISP ou seus produtos.  </p>"},{"location":"about/#organizacao-da-documentacao","title":"\ud83d\udca1 Organiza\u00e7\u00e3o da Documenta\u00e7\u00e3o","text":"<p>A documenta\u00e7\u00e3o foi estruturada para ser clara e f\u00e1cil de usar, incluindo:</p> <ul> <li>Guia R\u00e1pido: exemplos de uso para come\u00e7ar rapidamente.  </li> <li>Pagamentos: compra, reembolso e recarga.  </li> <li>Fatura\u00e7\u00e3o (3DS): normaliza\u00e7\u00e3o de billing e dados do usu\u00e1rio para transa\u00e7\u00f5es 3DS.  </li> <li>Respostas: interpreta\u00e7\u00e3o dos resultados da SISP (<code>SUCCESS</code>, <code>CANCELLED</code>, <code>ERROR</code>).  </li> <li>Arquitetura: vis\u00e3o geral de como o SDK funciona internamente.</li> </ul>"},{"location":"about/#auxilio-de-inteligencia-artificial","title":"\ud83e\udd16 Aux\u00edlio de Intelig\u00eancia Artificial","text":"<p>A documenta\u00e7\u00e3o foi organizada com aux\u00edlio de IA para melhorar a estrutura, clareza e exemplos, mas todo o conte\u00fado t\u00e9cnico reflete implementa\u00e7\u00f5es do SDK e da API da SISP, sem copiar material protegido por direitos autorais.  </p>"},{"location":"about/#isencao-de-responsabilidade-legal","title":"\u2696\ufe0f Isen\u00e7\u00e3o de Responsabilidade Legal","text":"<ul> <li>Este SDK \u00e9 de uso pr\u00f3prio e comunit\u00e1rio, sem v\u00ednculo oficial com a SISP.  </li> <li>A documenta\u00e7\u00e3o \u00e9 para fins informativos e educativos, e o uso em produ\u00e7\u00e3o deve respeitar as regras da SISP e legisla\u00e7\u00f5es locais.  </li> <li>O conte\u00fado gerado com aux\u00edlio de IA foi revisado para remover qualquer material que pudesse gerar problemas legais.</li> <li>Se achar que o projeto no seu todo ou seu parcial viola algum legal, por favor entre em contacto</li> </ul> <p>Para d\u00favidas ou contribui\u00e7\u00f5es, acesse o reposit\u00f3rio: GitHub</p>"},{"location":"api/","title":"API Reference \u2013 Vinti4Net PHP SDK","text":"<p>Este documento descreve a API do SDK PHP para integra\u00e7\u00e3o com o sistema de pagamentos Vinti4/SISP (Cabo Verde).</p>"},{"location":"api/#1-classe-vinti4net","title":"1\ufe0f\u20e3 Classe <code>Vinti4Net</code>","text":"<p>Descri\u00e7\u00e3o: Facade principal do SDK que unifica opera\u00e7\u00f5es de pagamentos e reembolsos, simplificando o envio de transa\u00e7\u00f5es ao SISP.</p> <pre><code>use Erilshk\\Sisp\\Vinti4Net;\n\n$vinti = new Vinti4Net($posID, $posAuthCode, $endpoint);\n</code></pre>"},{"location":"api/#metodos-principais","title":"M\u00e9todos principais","text":"M\u00e9todo Par\u00e2metros Retorno Descri\u00e7\u00e3o <code>setRequestParams(array $params)</code> <code>merchantRef</code>, <code>merchantSession</code>, <code>languageMessages</code>, <code>entityCode</code>, <code>referenceNumber</code>, <code>billing</code>, <code>currency</code>, <code>acctID</code>, <code>acctInfo</code>, <code>addrMatch</code>, <code>billAddrCountry</code>, <code>billAddrCity</code>, <code>billAddrLine1</code>, <code>billAddrPostCode</code>, <code>email</code>, <code>clearingPeriod</code> <code>self</code> Configura par\u00e2metros opcionais para a pr\u00f3xima transa\u00e7\u00e3o. <code>setMerchant(string $reference, ?string $session = null)</code> Refer\u00eancia do merchant e sess\u00e3o <code>self</code> Define refer\u00eancia e sess\u00e3o do merchant. <code>preparePurchase(float                                        | string $amount, array                                                                                                                                                                                                                              | Billing $billing, string $currency = 'CVE')</code> Valor, dados de fatura\u00e7\u00e3o, moeda <code>self</code> Prepara pagamento de compra 3DS. <code>prepareServicePayment(float                                  | string $amount, int $entity, string $number)</code> Valor, entidade, refer\u00eancia <code>self</code> Prepara pagamento de servi\u00e7o. <code>prepareRecharge(float                                        | string $amount, int $entity, string $number)</code> Valor, entidade, n\u00famero <code>self</code> Prepara pagamento de recarga. <code>prepareRefund(float                                          | string $amount, string $transactionID, string $clearingPeriod)</code> Valor, ID da transa\u00e7\u00e3o, clearing period <code>self</code> Prepara um reembolso. <code>createPaymentForm(string $responseUrl, string $lang = 'pt')</code> URL de retorno, idioma <code>string</code> Gera formul\u00e1rio HTML auto-submiss\u00e3o. <code>processResponse(array $postData)</code> Dados recebidos do SISP <code>Vinti4Response</code> Processa a resposta do Payment ou Refund. <code>getRequest(): array</code> \u2014 <code>array</code> Retorna os dados preparados da requisi\u00e7\u00e3o (debug)."},{"location":"api/#exemplo-de-uso-compra-3ds","title":"Exemplo de uso \u2013 Compra 3DS","text":"<pre><code>$billing = \\Erilshk\\Sisp\\Billing::create([\n    'email' =&gt; 'cliente@exemplo.com',\n    'country' =&gt; '132',\n    'city' =&gt; 'Praia',\n    'address' =&gt; 'Av. Cidade da Praia, 45',\n    'postalCode' =&gt; '7600'\n]);\n\n$vinti-&gt;setMerchant('REF12345')\n      -&gt;preparePurchase(100.50, $billing)\n      -&gt;createPaymentForm('https://meusite.com/retorno');\n</code></pre>"},{"location":"api/#2-classe-billing","title":"2\ufe0f\u20e3 Classe <code>Billing</code>","text":"<p>Descri\u00e7\u00e3o: Representa informa\u00e7\u00f5es de fatura\u00e7\u00e3o para compras 3DS, incluindo endere\u00e7o, contatos e informa\u00e7\u00f5es de conta do cliente.</p> <pre><code>use Erilshk\\Sisp\\Billing;\n\n// Criar billing de forma fluente\n$billing = Billing::make()\n    -&gt;email('cliente@exemplo.com')\n    -&gt;country('132')\n    -&gt;city('Praia')\n    -&gt;address('Av. Cidade da Praia, 45')\n    -&gt;postalCode('7600')\n    -&gt;mobilePhone('238', '99123456')\n    -&gt;acctID('12345');\n</code></pre>"},{"location":"api/#metodos","title":"M\u00e9todos","text":"M\u00e9todo Descri\u00e7\u00e3o <code>make()</code> Cria inst\u00e2ncia vazia para fluent setter. <code>create(array $data)</code> Cria array pronto para requisi\u00e7\u00e3o a partir de dados do cliente. <code>fill(array $data)</code> Preenche dados existentes no objeto Billing. <code>toArray()</code> Retorna array pronto para envio."},{"location":"api/#3-classe-vinti4response","title":"3\ufe0f\u20e3 Classe <code>Vinti4Response</code>","text":"<p>Descri\u00e7\u00e3o: Normaliza a resposta do SISP, expondo status, mensagem amig\u00e1vel, dados, DCC, debug e detalhes adicionais.</p> <pre><code>use Erilshk\\Sisp\\Vinti4Response;\n\n/** Exemplo de processamento */\n$response = $vinti-&gt;processResponse($_POST);\n\nif ($response-&gt;isSuccess()) {\n    echo \"Transa\u00e7\u00e3o aprovada: \" . $response-&gt;getAmount() . \" \" . $response-&gt;getCurrency();\n} elseif ($response-&gt;isCancelled()) {\n    echo \"Cancelada pelo usu\u00e1rio.\";\n} elseif ($response-&gt;hasInvalidFingerprint()) {\n    echo \"Fingerprint inv\u00e1lido!\";\n} else {\n    echo \"Erro: \" . $response-&gt;GetAdditionalErrorMessage();\n}\n</code></pre>"},{"location":"api/#propriedades","title":"Propriedades","text":"Propriedade Tipo Descri\u00e7\u00e3o <code>status</code> string Status: <code>SUCCESS</code>, <code>ERROR</code>, <code>CANCELLED</code>, <code>INVALID_FINGERPRINT</code>. <code>message</code> string Mensagem amig\u00e1vel do status. <code>success</code> bool <code>true</code> se a transa\u00e7\u00e3o foi bem-sucedida. <code>data</code> array Dados brutos do SISP. <code>dcc</code> array Informa\u00e7\u00f5es de DCC (<code>enabled</code>, <code>amount</code>, <code>currency</code>, <code>markup</code>, <code>rate</code>). <code>debug</code> array Informa\u00e7\u00f5es de depura\u00e7\u00e3o (para fingerprint inv\u00e1lido). <code>detail</code> ?string Detalhes adicionais de erro."},{"location":"api/#dcc-dynamic-currency-conversion","title":"DCC (Dynamic Currency Conversion)","text":"<ul> <li>Aplic\u00e1vel somente em compra 3DS.</li> <li>Estrutura:</li> </ul> <pre><code>[\n    'enabled' =&gt; true|false,\n    'amount' =&gt; 100.50,\n    'currency' =&gt; 'USD',\n    'markup' =&gt; 5,\n    'rate' =&gt; 1.2,\n    'error' =&gt; null\n]\n</code></pre> <p>Para mais exemplos e detalhes de cada par\u00e2metro, consulte Billing e respostas.</p>"},{"location":"architecture/","title":"\ud83c\udfd7\ufe0f SDK Architecture Overview","text":"<p>O diagrama abaixo apresenta as classes principais do SDK e suas depend\u00eancias:</p> <pre><code>classDiagram\n    class Vinti4Net {\n        - Payment payment\n        - Refund refund\n        - array request\n        - bool prepared\n        + setRequestParams()\n        + setMerchant()\n        + preparePurchasePayment()\n        + prepareServicePayment()\n        + prepareRechargePayment()\n        + prepareRefundPayment()\n        + createPaymentForm()\n        + processResponse()\n        + getRequest()\n    }\n\n    class Payment {\n        +preparePayment()\n        +processResponse()\n    }\n\n    class Refund {\n        +preparePayment()\n        +processResponse()\n    }\n\n    class Billing {\n        +make()\n        +create()\n        +fill()\n        +toArray()\n    }\n\n    class Vinti4Response {\n        +status\n        +message\n        +success\n        +data\n        +dcc\n        +debug\n        +detail\n        +isSuccess()\n        +isCancelled()\n        +hasInvalidFingerprint()\n        +getTransactionId()\n        +getMerchantRef()\n        +getAmount()\n        +getCurrency()\n        +generateReceiptHtml()\n        +toArray()\n        +toJson()\n    }\n\n    Vinti4Net --&gt; Payment\n    Vinti4Net --&gt; Refund\n    Vinti4Net --&gt; Billing\n    Vinti4Net --&gt; Vinti4Response</code></pre>"},{"location":"architecture/#flow-of-a-payment","title":"\ud83d\udd39 Flow of a Payment","text":"<p>O fluxo completo de uma transa\u00e7\u00e3o no SDK:</p> <pre><code>sequenceDiagram\n    participant Merchant\n    participant SDK as Vinti4Net SDK\n    participant SISP\n    participant User\n\n    Merchant-&gt;&gt;SDK: preparePurchasePayment() / prepareServicePayment() / prepareRechargePayment()\n    Merchant-&gt;&gt;SDK: createPaymentForm()\n    SDK-&gt;&gt;Merchant: HTML Auto-submit Form\n\n    Merchant-&gt;&gt;User: Redirect to Payment Page\n    User-&gt;&gt;SISP: Complete Payment\n    SISP--&gt;&gt;Merchant: POST Callback\n\n    Merchant-&gt;&gt;SDK: processResponse()\n    SDK--&gt;&gt;Merchant: Vinti4Response</code></pre>"},{"location":"architecture/#observacoes","title":"\ud83d\udd39 Observa\u00e7\u00f5es","text":"<ol> <li><code>Vinti4Net</code> \u00e9 a fachada principal; todas as opera\u00e7\u00f5es passam por ela.  </li> <li><code>Payment</code> e <code>Refund</code> cuidam da l\u00f3gica de cria\u00e7\u00e3o e processamento das transa\u00e7\u00f5es.  </li> <li><code>Billing</code> simplifica a prepara\u00e7\u00e3o dos campos 3DS.  </li> <li><code>Vinti4Response</code> encapsula todas as respostas do SISP, padronizando status, mensagens e dados adicionais.  </li> <li>O sequence diagram mostra o fluxo t\u00edpico: do <code>preparePayment</code> at\u00e9 o retorno de <code>Vinti4Response</code>.  </li> </ol>"},{"location":"architecture/#fluxo-oficial-do-processamento-das-transacoes-sisp-mpi","title":"\ud83d\udccc Fluxo Oficial do Processamento das Transa\u00e7\u00f5es (SISP / MPI)","text":"<pre><code>sequenceDiagram\n    autonumber\n\n    participant C as Cliente\n    participant M as Comerciante&lt;br/&gt;(Seu Sistema)\n    participant SDK as Vinti4Net SDK\n    participant S as SISP&lt;br/&gt;MPI / 3DSServer\n\n    C-&gt;&gt;M: a. Faz checkout do produto/servi\u00e7o\n    M-&gt;&gt;SDK: b. Adiciona dados do pagamento + dados do comerciante\n    SDK-&gt;&gt;S: b. Envia POST (request) para o URL SISP\n    S-&gt;&gt;M: c. Autentica comerciante&lt;br/&gt;c.1 Em caso de falha \u2192 devolve erro\n    S-&gt;&gt;C: d. P\u00e1gina SISP para recolha dos dados do cart\u00e3o\n    C-&gt;&gt;S: e. Autentica transa\u00e7\u00e3o (3DS)\n    S-&gt;&gt;S: f. Processamento da autoriza\u00e7\u00e3o\n    S-&gt;&gt;M: g. Envia POST de resposta (response)&lt;br/&gt;indica sucesso ou falha</code></pre>"},{"location":"billing/","title":"\ud83e\uddfe Billing (3DS Support)","text":"<p>O helper <code>Billing</code> permite normalizar os campos de billing necess\u00e1rios para compras 3DS, simplificando a integra\u00e7\u00e3o com o SDK Vinti4Net / SISP.</p> <p>Ele cobre:</p> <ul> <li>Campos obrigat\u00f3rios de endere\u00e7o (<code>billAddr*</code>, <code>email</code>)</li> <li>Endere\u00e7o de entrega (<code>shipAddr*</code>)</li> <li>Telefones (<code>mobilePhone</code>, <code>workPhone</code>)</li> <li>Dados da conta do usu\u00e1rio (<code>acctID</code>, <code>acctInfo</code>)</li> <li>Flags de seguran\u00e7a (<code>suspicious</code>, <code>addrMatch</code>)</li> </ul>"},{"location":"billing/#exemplo-rapido-usando-billingcreate","title":"\ud83d\udd39 Exemplo r\u00e1pido usando <code>Billing::create()</code>","text":"<pre><code>use Erilshk\\Sisp\\Billing;\n\n$billing = Billing::create([\n    'email' =&gt; 'user@mail.com',\n    'country' =&gt; '132',               // C\u00f3digo do pa\u00eds (CVE)\n    'city' =&gt; 'Praia',\n    'address' =&gt; 'Achada Santo Ant\u00f3nio',\n    'postalCode' =&gt; '7600',\n    'mobilePhone' =&gt; '9911122',\n]);\n</code></pre> <p>\ud83d\udca1 <code>create()</code> \u00e9 \u00fatil quando voc\u00ea j\u00e1 tem todos os dados em um array e quer gerar rapidamente o array final para enviar ao SDK.</p>"},{"location":"billing/#exemplo-completo-usando-billingmake-com-chaining","title":"\ud83d\udd39 Exemplo completo usando <code>Billing::make()</code> com chaining","text":"<pre><code>$billing = Billing::make()\n    -&gt;email('user@mail.com')\n    -&gt;country('132')\n    -&gt;city('Praia')\n    -&gt;address('Achada Santo Ant\u00f3nio')\n    -&gt;address2('Bloco B, Apt 10')\n    -&gt;postalCode('7600')\n    -&gt;state('01')\n    -&gt;shipAddress('Rua de Entrega, 45')\n    -&gt;shipCity('Praia')\n    -&gt;shipPostalCode('7601')\n    -&gt;mobilePhone('238', '9911122')\n    -&gt;workPhone('238', '2612345')\n    -&gt;acctID('123456')\n    -&gt;acctInfo([\n        'chAccAgeInd' =&gt; '05',\n        'chAccChange' =&gt; '20230101',\n        'chAccDate' =&gt; '20220101',\n        'chAccPwChange' =&gt; '20230201',\n        'chAccPwChangeInd' =&gt; '05',\n        'suspiciousAccActivity' =&gt; '01',\n    ])\n    -&gt;addrMatch(true)\n    -&gt;suspicious(false)\n    -&gt;toArray();\n</code></pre> <p>\ud83d\udca1 Nota: <code>make()</code> permite encadear m\u00e9todos e preencher apenas os campos desejados, gerando o array final com <code>toArray()</code>. \u00c9 ideal para cen\u00e1rios din\u00e2micos, como capturar dados do usu\u00e1rio a partir de formul\u00e1rios.</p>"},{"location":"billing/#campos-importantes-de-3ds","title":"\ud83d\udd39 Campos importantes de 3DS","text":"Campo Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o <code>email</code> string Sim Email do titular do cart\u00e3o <code>billAddrCountry</code> string (ISO 3166-1 num\u00e9rico) Sim Pa\u00eds do endere\u00e7o de cobran\u00e7a <code>billAddrCity</code> string Sim Cidade de cobran\u00e7a <code>billAddrLine1</code> string Sim Endere\u00e7o principal <code>billAddrLine2/3</code> string N\u00e3o Endere\u00e7os secund\u00e1rios <code>billAddrPostCode</code> string Sim C\u00f3digo postal <code>billAddrState</code> string N\u00e3o C\u00f3digo do estado/regi\u00e3o <code>shipAddr*</code> string N\u00e3o Endere\u00e7o de entrega, opcional <code>mobilePhone</code> objeto N\u00e3o <code>{ cc, subscriber }</code> <code>workPhone</code> objeto N\u00e3o <code>{ cc, subscriber }</code> <code>acctID</code> string Recomendado ID da conta do usu\u00e1rio <code>acctInfo</code> objeto Recomendado Informa\u00e7\u00f5es da conta do usu\u00e1rio (chAccAgeInd, chAccChange, etc.) <code>suspicious</code> bool Opcional Marca atividade suspeita do usu\u00e1rio <code>addrMatch</code> string Y/N Opcional Endere\u00e7o de cobran\u00e7a e entrega coincidem"},{"location":"billing/#fluxo-de-billing-com-sdk","title":"\ud83d\udd39 Fluxo de Billing com SDK","text":"<pre><code>flowchart LR\n    S[Billing] --&gt; A[\"Billing::create([...])\"]\n    S --&gt; AA[\"Billing::make()\"]\n\n    A --&gt; B[\"Vinti4Net::preparePurchasePayment(...)\"]\n    AA --&gt; AB[chaining]\n    AB  --&gt; ABA[methods] --&gt; AB\n\n    AB --&gt; AC[\"toArray()\"]\n    AC --&gt; B\n\n    B --&gt; C[\"Vinti4Net::createPaymentForm(responseUrl)\"]\n    C --&gt; D[\"Envio ao SISP / 3DS Server\"]</code></pre>"},{"location":"installation/","title":"\u2699\ufe0f Installation","text":"<p>Instale facilmente via Composer:</p> <pre><code>composer require erilshk/vinti4net\n</code></pre>"},{"location":"installation/#requisitos-do-sistema","title":"\ud83d\udda5\ufe0f Requisitos do Sistema","text":"<p>Antes de usar o SDK, certifique-se de que o seu ambiente atende aos seguintes requisitos:</p> <ul> <li>\ud83d\udd39 PHP 8.1 ou superior  </li> <li>\ud83d\udd39 Extens\u00f5es PHP obrigat\u00f3rias: </li> <li><code>json</code> </li> <li><code>mbstring</code> </li> </ul> <p>\u26a0\ufe0f Nota: Se alguma extens\u00e3o estiver faltando, o SDK poder\u00e1 n\u00e3o funcionar corretamente. No Linux, voc\u00ea pode instalar via <code>apt</code> ou <code>yum</code> (ex.: <code>sudo apt install php-mbstring php-json</code>).</p>"},{"location":"installation/#dica-rapida","title":"\u2705 Dica r\u00e1pida","text":"<p>Para verificar sua vers\u00e3o do PHP e extens\u00f5es instaladas:</p> <pre><code>php -v\nphp -m | grep -E \"json|mbstring\"\n</code></pre>"},{"location":"payments/","title":"Purchase Payment (3DS)","text":"<p>Use este m\u00e9todo para compras normais com cart\u00e3o Vinti4:</p> <pre><code>$sdk-&gt;preparePurchase(\n    amount: 1500,\n    billing: Billing::create($dadosDeFaturacao),\n    currency: 'CVE'\n);\n</code></pre>"},{"location":"payments/#service-payment","title":"Service Payment","text":"<pre><code>$sdk-&gt;prepareServicePayment(\n    amount: 2000,\n    entity: 341,\n    number: \"123456789\"\n);\n</code></pre>"},{"location":"payments/#recharge-payment","title":"Recharge Payment","text":"<pre><code>$sdk-&gt;prepareRecharge(\n    amount: 500,\n    entity: 341,\n    number: \"987654321\"\n);\n</code></pre>"},{"location":"quickstart/","title":"Quick Start","text":""},{"location":"quickstart/#1-criar-instancia","title":"1. Criar inst\u00e2ncia","text":"<pre><code>use Erilshk\\Sisp\\Vinti4Net;\n\n$sdk = new Vinti4Net(\n    posID: \"1234\",\n    posAuthCode: \"SECRETO\",\n);\n</code></pre>"},{"location":"quickstart/#2-preparar-pagamento","title":"2. Preparar pagamento","text":"<pre><code>// Os dados de Billing s\u00e3o obrigat\u00f3rios, segundo a documenta\u00e7\u00e3o da SISP, ela comp\u00f5e o PurchaseRequest.\n$billing = [\n    'email' =&gt; 'cliente@email.com',\n    'billAddrCountry' =&gt; '132',\n    'billAddrCity' =&gt; 'Cidade',\n    'billAddrLine1' =&gt; 'endere\u00e7o',\n    'billAddrPostCode' =&gt; '7601',\n];\n\n$sdk-&gt;preparePurchase(1000, $billing);\n</code></pre>"},{"location":"quickstart/#3-gerar-formulario-auto-submit","title":"3. Gerar formul\u00e1rio auto-submit","text":"<pre><code>echo $sdk-&gt;createPaymentForm(\"https://meusite.com/callback\");\n</code></pre>"},{"location":"quickstart/#4-processar-callback","title":"4. Processar callback","text":"<pre><code>// na p\u00e1gina de resposta de retorno:\n$response = $sdk-&gt;processResponse($_POST);\n\nif ($response-&gt;isSuccess()) {\n    // OK\n}\n</code></pre>"},{"location":"receipt/","title":"API \u2013 Recibos HTML (Trait <code>ReceiptRenderer</code>)","text":"<p>O <code>ReceiptRenderer</code> \u00e9 um trait utilizado na classe <code>Vinti4Response</code> para gerar recibos HTML de transa\u00e7\u00f5es processadas pelo SISP. Ele suporta compras, servi\u00e7os, recargas e reembolsos, al\u00e9m de casos gen\u00e9ricos.</p>"},{"location":"receipt/#principais-metodos","title":"Principais m\u00e9todos","text":"M\u00e9todo Par\u00e2metros Retorno Descri\u00e7\u00e3o <code>generateReceiptHtml(?string $companyName = null, bool $text = false)</code> <code>$companyName</code> \u2013 Nome da empresa<code>$text</code> \u2013 Gera recibo sem estilo se <code>true</code> <code>string</code> Gera o HTML completo do recibo, escolhendo automaticamente o tipo de transa\u00e7\u00e3o. <code>renderPurchaseReceipt(?string $companyName = null)</code> <code>$companyName</code> <code>string</code> Recibo de compra 3DS. <code>renderServiceReceipt(?string $companyName = null)</code> <code>$companyName</code> <code>string</code> Recibo para servi\u00e7os p\u00fablicos (\u00e1gua, luz, etc.). <code>renderRechargeReceipt(?string $companyName = null)</code> <code>$companyName</code> <code>string</code> Recibo para recargas de telem\u00f3vel. <code>renderRefundReceipt(?string $companyName = null)</code> <code>$companyName</code> <code>string</code> Recibo para reembolsos. <code>renderGenericReceipt(?string $companyName = null)</code> <code>$companyName</code> <code>string</code> Recibo para casos gen\u00e9ricos ou tipos n\u00e3o especificados."},{"location":"receipt/#recursos-e-opcoes","title":"Recursos e op\u00e7\u00f5es","text":"<ul> <li>Suporte a DCC (Dynamic Currency Conversion) em compras.</li> <li>M\u00e1scara de cart\u00e3o (<code>PAN</code>) para seguran\u00e7a.</li> <li>Formata\u00e7\u00e3o autom\u00e1tica de moeda e timestamp.</li> <li> <p>Diferentes cores e \u00edcones para status:</p> </li> <li> <p>\u2705 <code>SUCCESS</code> \u2013 Transa\u00e7\u00e3o aprovada</p> </li> <li>\u23f9 <code>CANCELLED</code> \u2013 Transa\u00e7\u00e3o cancelada</li> <li>\u26a0 <code>INVALID_FINGERPRINT</code> \u2013 Erro de seguran\u00e7a</li> <li>\u274c Outros erros</li> <li>Estilo CSS interno ou texto puro (via <code>$text = true</code>).</li> </ul>"},{"location":"receipt/#exemplo-de-uso","title":"Exemplo de uso","text":"<pre><code>$response = $vinti-&gt;processResponse($_POST);\n\n// Gera recibo com estilo padr\u00e3o\necho $response-&gt;generateReceiptHtml(\"Minha Empresa\");\n\n// Gera recibo texto puro (sem CSS)\necho $response-&gt;generateReceiptHtml(\"Minha Empresa\", true);\n</code></pre>"},{"location":"receipt/#exemplo-de-output-sucesso-compra-3ds","title":"Exemplo de output \u2013 Sucesso (compra 3DS)","text":"COMPROVATIVO DE PAGAMENTO Minha Empresa Refer\u00eancia:REF12345 Data/Hora:30/11/2025 14:32:10 Transa\u00e7\u00e3o ID:TID987654321 100,50 CVE Pagamento de servi\u00e7os Cart\u00e3o:123456\u2022\u2022\u2022\u20227890 Autoriza\u00e7\u00e3o:AUTH001 \u2713 TRANSA\u00c7\u00c3O APROVADA Emitido em 30/11/2025 14:32:12"},{"location":"receipt/#exemplo-de-output-erro-recibo-indisponivel","title":"Exemplo de output \u2013 Erro (Recibo Indispon\u00edvel)","text":"RECIBO INDISPON\u00cdVEL <p>Sistema Temporariamente Indispon\u00edvel</p> <p></p> \u26a0 TRANSA\u00c7\u00c3O N\u00c3O CONCLU\u00cdDA Emitido em 30/11/2025 14:32:12"},{"location":"receipt/#exemplo-output-recibo-sem-estilo-texto-puro","title":"Exemplo Output - Recibo Sem estilo (texto puro)","text":"Transa\u00e7\u00e3o de Sucesso <pre>\n==== RECIBO DE TRANSA\u00c7\u00c3O ====\nEmpresa: Loja ABC\nData/Hora: 30/11/2025 15:42:10\nStatus: APROVADA\nMensagem: Transa\u00e7\u00e3o v\u00e1lida.\n\nTransa\u00e7\u00e3o ID: 123456789\nRefer\u00eancia: REF-20251130-001\nTipo de Transa\u00e7\u00e3o: 8\nValor: 10.000,00 CVE\nCart\u00e3o: 123456\u2022\u2022\u2022\u20227890\nAutoriza\u00e7\u00e3o: AUTH-987654\n\n===========================\n</pre> Transa\u00e7\u00e3o com Erro <pre>\n==== RECIBO DE TRANSA\u00c7\u00c3O ====\nEmpresa: Loja ABC\nData/Hora: 30/11/2025 15:45:30\nStatus: N\u00c3O CONCLU\u00cdDA\nMensagem: Erro de processamento.\n\nTransa\u00e7\u00e3o ID: N/A\nRefer\u00eancia: REF-20251130-002\nTipo de Transa\u00e7\u00e3o: 8\nValor: 5.000,00 CVE\nCart\u00e3o: 123456\u2022\u2022\u2022\u20221234\n\n=== DETALHES DE ERRO ===\nErro: Saldo insuficiente\nMensagem adicional: Falha ao processar pagamento\n\n===========================\n</pre>"},{"location":"refunds/","title":"\ud83d\udcb8 Refunds","text":"<p>Para reembolsar uma transa\u00e7\u00e3o existente, use o m\u00e9todo:</p> <pre><code>$vinti4-&gt;prepareRefund(\n    amount: 1000,                  // \ud83d\udcb0 Valor a reembolsar\n    transactionID: \"TX119922\",     // \ud83c\udd94 ID da transa\u00e7\u00e3o SISP\n    clearingPeriod: \"1125\"         // \ud83d\udcc5 Per\u00edodo de compensa\u00e7\u00e3o obrigat\u00f3rio\n);\n</code></pre> <p>\u26a0\ufe0f Nota: guarde esses dados</p> <p><code>clearingPeriod</code> \u00e9 o Per\u00edodo Contabil\u00edstico em que a transa\u00e7\u00e3o se realizou, e  \u00e9 enviado na resposta pela SISP no pagamento <code>merchantRespCP</code>.</p> <p><code>Transaction ID</code> da transa\u00e7\u00e3o Original, que \u00e9 enviado na  resposta pela SISP no par\u00e2metro <code>merchantRespTid</code>.</p> <p>juntos identificam unicamente uma transa\u00e7\u00e3o na rede vinti4.</p>"},{"location":"refunds/#fluxo-de-reembolso","title":"\ud83d\udd39 Fluxo de Reembolso","text":"<pre><code>graph LR\n\n    A[\"Merchant\"] --&gt; B[\"prepareRefundPayment()\"]\n    B --&gt; C[\"createPaymentForm()\"]\n    C --&gt; D[\"SISP\"]\n    D --&gt; E[\"Callback\"]\n    E --&gt; F[\"processResponse()\"]</code></pre>"},{"location":"requests/","title":"Requisi\u00e7\u00f5es de Pagamento","text":"<p>Este documento descreve os par\u00e2metros utilizados para preparar e enviar pagamentos atrav\u00e9s do Vinti4Net PHP SDK.</p> <p>Todas as opera\u00e7\u00f5es passam por m\u00e9todos como:</p> <ul> <li><code>preparePurchase()</code></li> <li><code>prepareServicePayment()</code></li> <li><code>prepareRecharge()</code></li> <li><code>prepareRefund()</code></li> <li><code>setRequestParams()</code></li> </ul> <p>Os par\u00e2metros podem ser fornecidos diretamente ou via objeto <code>Billing</code> para dados de fatura\u00e7\u00e3o.</p>"},{"location":"requests/#parametros-gerais-de-requisicao","title":"Par\u00e2metros gerais de requisi\u00e7\u00e3o","text":"<p><code>setRequestParams()</code></p> Par\u00e2metro Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o <code>merchantRef</code> string Recomendado Refer\u00eancia do comerciante (at\u00e9 15 caracteres) <code>merchantSession</code> string Recomendado Identificador de sess\u00e3o do comerciante <code>languageMessages</code> string N\u00e3o C\u00f3digo de idioma para mensagens do SISP (<code>pt</code>, <code>en</code>, <code>fr</code>) <code>entityCode</code> int/string Depende C\u00f3digo da entidade para pagamentos de servi\u00e7o ou recarga <code>referenceNumber</code> string Depende N\u00famero de refer\u00eancia do servi\u00e7o ou recarga <code>timeStamp</code> string N\u00e3o Override de timestamp para a requisi\u00e7\u00e3o <code>billing</code> array/Billing Depende Dados de fatura\u00e7\u00e3o do cliente <code>currency</code> string/int N\u00e3o Moeda ISO ou c\u00f3digo num\u00e9rico SISP (ex.: <code>CVE</code>, <code>USD</code>, <code>132</code>) <code>acctID</code> string N\u00e3o ID da conta do portador (3DS2) <code>acctInfo</code> array N\u00e3o Informa\u00e7\u00f5es adicionais da conta do portador <code>addrMatch</code> string/YN N\u00e3o Indica se o endere\u00e7o de fatura\u00e7\u00e3o corresponde ao de envio (<code>Y</code>/<code>N</code>) <code>billAddrCountry</code> string Depende Pa\u00eds de fatura\u00e7\u00e3o (ISO 3166-1 alpha-2) <code>billAddrCity</code> string Depende Cidade de fatura\u00e7\u00e3o <code>billAddrLine1</code> string Depende Linha 1 do endere\u00e7o de fatura\u00e7\u00e3o <code>billAddrPostCode</code> string Depende C\u00f3digo postal de fatura\u00e7\u00e3o <code>email</code> string Depende Email do cliente <code>clearingPeriod</code> string Necess\u00e1rio para reembolso Per\u00edodo de liquida\u00e7\u00e3o exigido pelo SISP <p>Nota: Alguns par\u00e2metros s\u00f3 s\u00e3o necess\u00e1rios dependendo do tipo de transa\u00e7\u00e3o.</p>"},{"location":"requests/#exemplos-de-uso","title":"Exemplos de uso","text":""},{"location":"requests/#pagamento-de-compra","title":"Pagamento de compra","text":"<pre><code>use Erilshk\\Sisp\\Vinti4Net;\nuse Erilshk\\Sisp\\Billing;\n\n$payment = new Vinti4Net('POS_ID', 'AUTH_CODE');\n\n$billing = Billing::make()\n    -&gt;email('cliente@example.com')\n    -&gt;country('132')\n    -&gt;city('Praia')\n    -&gt;address('Av. Cidade da Praia, 45')\n    -&gt;postalCode('7600');\n\n$payment-&gt;preparePurchase(123.45, $billing)\n        -&gt;setMerchant('REF123', 'SESSION001')\n        -&gt;createPaymentForm('https://minha-loja.com/response');\n</code></pre>"},{"location":"requests/#pagamento-de-servico","title":"Pagamento de servi\u00e7o","text":"<pre><code>$payment-&gt;prepareServicePayment(50.00, 10001, '123456')\n        -&gt;setMerchant('REF456');\n</code></pre>"},{"location":"requests/#recarga-de-telemovel","title":"Recarga de telem\u00f3vel","text":"<pre><code>$payment-&gt;prepareRecharge(10.00, 10021, '99123456')\n        -&gt;setMerchant('REF789');\n</code></pre>"},{"location":"requests/#reembolso","title":"Reembolso","text":"<pre><code>$payment-&gt;prepareRefund(50.00, 'TX123456', '2025-11')\n        -&gt;createPaymentForm('https://minha-loja.com/response');\n</code></pre>"},{"location":"requests/#boas-praticas","title":"Boas pr\u00e1ticas","text":"<ul> <li>Sempre use <code>setMerchant()</code> para definir <code>merchantRef</code> e <code>merchantSession</code>.</li> <li>Use o objeto <code>Billing</code> para garantir compatibilidade com 3DS2.</li> <li>Nunca inclua par\u00e2metros n\u00e3o listados, caso contr\u00e1rio <code>InvalidArgumentException</code> ser\u00e1 lan\u00e7ada.</li> <li>Para debug, use <code>$payment-&gt;getRequest()</code> para inspecionar a requisi\u00e7\u00e3o antes do envio.</li> </ul> <p>Para mais exemplos e detalhes de cada par\u00e2metro, consulte Billing e Pagamentos.</p>"},{"location":"responses/","title":"\ud83d\udce6 Vinti4Response","text":"<p>Todas as respostas processadas pelo SDK retornam um objeto padr\u00e3o <code>Vinti4Response</code>. Ele unifica e interpreta todas as respostas do SISP, incluindo sucesso, erros, cancelamentos e problemas de fingerprint.</p>"},{"location":"responses/#exemplo-de-uso","title":"\ud83d\udd39 Exemplo de uso","text":"<pre><code>$response = $sdk-&gt;processResponse($_POST);\n\nif ($response-&gt;isSuccess()) {\n    echo \"Transa\u00e7\u00e3o aprovada! ID: \" . $response-&gt;getTransactionId();\n} elseif ($response-&gt;isCancelled()) {\n    echo \"Transa\u00e7\u00e3o cancelada pelo usu\u00e1rio.\";\n} elseif ($response-&gt;hasInvalidFingerprint()) {\n    echo \"Problema de seguran\u00e7a: fingerprint inv\u00e1lido.\";\n}\n\n$data = $response-&gt;toArray();   // Array completo\n$json = $response-&gt;toJson();   // JSON formatado\n</code></pre>"},{"location":"responses/#principais-metodos","title":"\ud83d\udd39 Principais m\u00e9todos","text":"M\u00e9todo Descri\u00e7\u00e3o <code>isSuccess()</code> Retorna <code>true</code> se a transa\u00e7\u00e3o foi conclu\u00edda com sucesso. <code>isCancelled()</code> Retorna <code>true</code> se o usu\u00e1rio cancelou a transa\u00e7\u00e3o. <code>hasInvalidFingerprint()</code> Retorna <code>true</code> se houve problema de fingerprint. <code>getTransactionId()</code> Retorna o ID da transa\u00e7\u00e3o no SISP. <code>getClearingPeriod()</code> Retorna o Period contabilistico em que a transa\u00e7\u00e3o se relizou. <code>getMerchantRef()</code> Retorna a refer\u00eancia do merchant. <code>getAmount()</code> Retorna o valor da transa\u00e7\u00e3o. <code>getCurrency()</code> Retorna a moeda da transa\u00e7\u00e3o. <code>toArray()</code> Retorna todos os dados da resposta como array. <code>toJson()</code> Retorna todos os dados da resposta como JSON formatado."},{"location":"responses/#estrutura-do-objeto","title":"\ud83d\udd39 Estrutura do objeto","text":"<pre><code>classDiagram\n    class Vinti4Response {\n        +string status\n        +string message\n        +bool success\n        +array data\n        +array dcc\n        +array debug\n        +string detail\n        +isSuccess()\n        +isCancelled()\n        +hasInvalidFingerprint()\n        +getTransactionId()\n        +getMerchantRef()\n        +getAmount()\n        +getCurrency()\n        +toArray()\n        +toJson()\n    }\n\n    Vinti4Response --&gt; data : \"Dados detalhados da transa\u00e7\u00e3o\"\n    Vinti4Response --&gt; dcc : \"Informa\u00e7\u00f5es DCC (Dynamic Currency Conversion)\"\n    Vinti4Response --&gt; debug : \"Informa\u00e7\u00f5es de debug (fingerprint inv\u00e1lido etc.)\"\n    Vinti4Response --&gt; detail : \"Detalhes de erro opcionais\"</code></pre>"},{"location":"responses/#observacoes-importantes","title":"\ud83d\udd39 Observa\u00e7\u00f5es importantes","text":"<ol> <li><code>status</code> pode ser: <code>SUCCESS</code>, <code>CANCELLED</code>, <code>INVALID_FINGERPRINT</code> ou <code>ERROR</code>.  </li> <li><code>dcc</code> cont\u00e9m informa\u00e7\u00f5es sobre Dynamic Currency Conversion, se aplic\u00e1vel.  </li> <li><code>debug</code> ajuda a identificar problemas de seguran\u00e7a (fingerprint).  </li> <li><code>detail</code> fornece informa\u00e7\u00f5es detalhadas de erro retornadas pelo SISP.  </li> </ol>"}]}