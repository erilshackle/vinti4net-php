{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Vinti4Net PHP SDK","text":"<p>SDK PHP para integra\u00e7\u00e3o com o Gateway de Pagamentos RedeVinti4 / SISP (Cabo Verde).</p> <p>Este SDK oferece:</p> <ul> <li>\ud83d\udd12 Pagamentos 3DS (purchase)</li> <li>\ud83d\udd04 Pagamentos de servi\u00e7os (entidade + refer\u00eancia)</li> <li>\u26a1 Recargas</li> <li>\ud83d\udcb0 Reembolsos</li> <li>\ud83e\uddfe Interpreta\u00e7\u00e3o simplificada das respostas do SISP</li> <li>\ud83d\udce6 Simplifica\u00e7\u00e3o completa da gera\u00e7\u00e3o de formul\u00e1rios auto-submit</li> </ul>"},{"location":"#namespace","title":"Namespace","text":"<pre><code>use Erilshk\\Sisp\\Vinti4Net;\n</code></pre>"},{"location":"#fluxo-geral","title":"Fluxo geral","text":"<pre><code>graph LR\n\n    A[\"Seu Sistema\"] --&gt; B[\"Vinti4Net SDK\"]\n    B --&gt; C[\"Gera Formul\u00e1rio&lt;br/&gt;POST (auto-submit)\"]\n    C --&gt; D[\"SISP&lt;br/&gt;MPI / 3DSServer \"]\n    D --&gt; E[\"Cliente Autentica&lt;br/&gt; Dados do cart\u00e3o + Autentica\u00e7\u00e3o 3DS\"]\n    E --&gt; F[\"SISP envia POST de Retorno (Response)\"]\n    F --&gt; G[\"Vinti4Net::processResponse()\"]\n    G --&gt; H[\"Objeto Vinti4Response\"]\n    H --&gt; A</code></pre>"},{"location":"about/","title":"Sobre esta Documenta\u00e7\u00e3o","text":"<p>Bem-vindo \u00e0 documenta\u00e7\u00e3o do Vinti4Net PHP SDK, um SDK desenvolvido para facilitar a integra\u00e7\u00e3o com o sistema de pagamentos Vinti4 / SISP (Cabo Verde).</p> <p>\u26a0\ufe0f Nota Importante: Este SDK n\u00e3o \u00e9 oficial da SISP. Ele foi desenvolvido por @erilshackle para simplificar a comunica\u00e7\u00e3o com a API da SISP, mas n\u00e3o representa oficialmente a SISP ou seus produtos.  </p>"},{"location":"about/#organizacao-da-documentacao","title":"\ud83d\udca1 Organiza\u00e7\u00e3o da Documenta\u00e7\u00e3o","text":"<p>A documenta\u00e7\u00e3o foi estruturada para ser clara e f\u00e1cil de usar, incluindo:</p> <ul> <li>Guia R\u00e1pido: exemplos de uso para come\u00e7ar rapidamente.  </li> <li>Pagamentos: compra, reembolso e recarga.  </li> <li>Fatura\u00e7\u00e3o (3DS): normaliza\u00e7\u00e3o de billing e dados do usu\u00e1rio para transa\u00e7\u00f5es 3DS.  </li> <li>Respostas: interpreta\u00e7\u00e3o dos resultados da SISP (<code>SUCCESS</code>, <code>CANCELLED</code>, <code>ERROR</code>).  </li> <li>Arquitetura: vis\u00e3o geral de como o SDK funciona internamente.</li> </ul>"},{"location":"about/#auxilio-de-inteligencia-artificial","title":"\ud83e\udd16 Aux\u00edlio de Intelig\u00eancia Artificial","text":"<p>A documenta\u00e7\u00e3o foi organizada com aux\u00edlio de IA para melhorar a estrutura, clareza e exemplos, mas todo o conte\u00fado t\u00e9cnico reflete implementa\u00e7\u00f5es do SDK e da API da SISP, sem copiar material protegido por direitos autorais.  </p>"},{"location":"about/#isencao-de-responsabilidade-legal","title":"\u2696\ufe0f Isen\u00e7\u00e3o de Responsabilidade Legal","text":"<ul> <li>Este SDK \u00e9 de uso pr\u00f3prio e comunit\u00e1rio, sem v\u00ednculo oficial com a SISP.  </li> <li>A documenta\u00e7\u00e3o \u00e9 para fins informativos e educativos, e o uso em produ\u00e7\u00e3o deve respeitar as regras da SISP e legisla\u00e7\u00f5es locais.  </li> <li>O conte\u00fado gerado com aux\u00edlio de IA foi revisado para remover qualquer material que pudesse gerar problemas legais.</li> <li>Se achar que o projeto no seu todo ou seu parcial viola algum legal, por favor entre em contacto</li> </ul> <p>Para d\u00favidas ou contribui\u00e7\u00f5es, acesse o reposit\u00f3rio: GitHub</p>"},{"location":"architecture/","title":"\ud83c\udfd7\ufe0f SDK Architecture Overview","text":"<p>O diagrama abaixo apresenta as classes principais do SDK e suas depend\u00eancias:</p> <pre><code>classDiagram\n    class Vinti4Net {\n        - Payment payment\n        - Refund refund\n        - array request\n        - bool prepared\n        + setRequestParams()\n        + preparePurchasePayment()\n        + prepareServicePayment()\n        + prepareRechargePayment()\n        + prepareRefundPayment()\n        + createPaymentForm()\n        + processResponse()\n        + getRequest()\n    }\n\n    class Payment {\n        +preparePayment()\n        +processResponse()\n    }\n\n    class Refund {\n        +preparePayment()\n        +processResponse()\n    }\n\n    class Billing {\n        +make()\n        +create()\n        +fill()\n        +toArray()\n    }\n\n    class Vinti4Response {\n        +status\n        +message\n        +success\n        +data\n        +dcc\n        +debug\n        +detail\n        +isSuccess()\n        +isCancelled()\n        +hasInvalidFingerprint()\n        +getTransactionId()\n        +getMerchantRef()\n        +getAmount()\n        +getCurrency()\n        +toArray()\n        +toJson()\n    }\n\n    Vinti4Net --&gt; Payment\n    Vinti4Net --&gt; Refund\n    Vinti4Net --&gt; Billing\n    Vinti4Net --&gt; Vinti4Response</code></pre>"},{"location":"architecture/#flow-of-a-payment","title":"\ud83d\udd39 Flow of a Payment","text":"<p>O fluxo completo de uma transa\u00e7\u00e3o no SDK:</p> <pre><code>sequenceDiagram\n    participant Merchant\n    participant SDK as Vinti4Net SDK\n    participant SISP\n    participant User\n\n    Merchant-&gt;&gt;SDK: preparePurchasePayment() / prepareServicePayment() / prepareRechargePayment()\n    Merchant-&gt;&gt;SDK: createPaymentForm()\n    SDK-&gt;&gt;Merchant: HTML Auto-submit Form\n\n    Merchant-&gt;&gt;User: Redirect to Payment Page\n    User-&gt;&gt;SISP: Complete Payment\n    SISP--&gt;&gt;Merchant: POST Callback\n\n    Merchant-&gt;&gt;SDK: processResponse()\n    SDK--&gt;&gt;Merchant: Vinti4Response</code></pre>"},{"location":"architecture/#observacoes","title":"\ud83d\udd39 Observa\u00e7\u00f5es","text":"<ol> <li><code>Vinti4Net</code> \u00e9 a fachada principal; todas as opera\u00e7\u00f5es passam por ela.  </li> <li><code>Payment</code> e <code>Refund</code> cuidam da l\u00f3gica de cria\u00e7\u00e3o e processamento das transa\u00e7\u00f5es.  </li> <li><code>Billing</code> simplifica a prepara\u00e7\u00e3o dos campos 3DS.  </li> <li><code>Vinti4Response</code> encapsula todas as respostas do SISP, padronizando status, mensagens e dados adicionais.  </li> <li>O sequence diagram mostra o fluxo t\u00edpico: do <code>preparePayment</code> at\u00e9 o retorno de <code>Vinti4Response</code>.  </li> </ol>"},{"location":"architecture/#fluxo-oficial-do-processamento-das-transacoes-sisp-mpi","title":"\ud83d\udccc Fluxo Oficial do Processamento das Transa\u00e7\u00f5es (SISP / MPI)","text":"<pre><code>sequenceDiagram\n    autonumber\n\n    participant C as Cliente\n    participant M as Comerciante&lt;br/&gt;(Seu Sistema)\n    participant SDK as Vinti4Net SDK\n    participant S as SISP&lt;br/&gt;MPI / 3DSServer\n\n    C-&gt;&gt;M: a. Faz checkout do produto/servi\u00e7o\n    M-&gt;&gt;SDK: b. Adiciona dados do pagamento + dados do comerciante\n    SDK-&gt;&gt;S: b. Envia POST (request) para o URL SISP\n    S-&gt;&gt;M: c. Autentica comerciante&lt;br/&gt;c.1 Em caso de falha \u2192 devolve erro\n    S-&gt;&gt;C: d. P\u00e1gina SISP para recolha dos dados do cart\u00e3o\n    C-&gt;&gt;S: e. Autentica transa\u00e7\u00e3o (3DS)\n    S-&gt;&gt;S: f. Processamento da autoriza\u00e7\u00e3o\n    S-&gt;&gt;M: g. Envia POST de resposta (response)&lt;br/&gt;indica sucesso ou falha</code></pre>"},{"location":"billing/","title":"\ud83e\uddfe Billing (3DS Support)","text":"<p>O helper <code>Billing</code> permite normalizar os campos de billing necess\u00e1rios para compras 3DS, simplificando a integra\u00e7\u00e3o com o SDK Vinti4Net / SISP.</p> <p>Ele cobre:</p> <ul> <li>Campos obrigat\u00f3rios de endere\u00e7o (<code>billAddr*</code>, <code>email</code>)</li> <li>Endere\u00e7o de entrega (<code>shipAddr*</code>)</li> <li>Telefones (<code>mobilePhone</code>, <code>workPhone</code>)</li> <li>Dados da conta do usu\u00e1rio (<code>acctID</code>, <code>acctInfo</code>)</li> <li>Flags de seguran\u00e7a (<code>suspicious</code>, <code>addrMatch</code>)</li> </ul>"},{"location":"billing/#exemplo-rapido-usando-billingcreate","title":"\ud83d\udd39 Exemplo r\u00e1pido usando <code>Billing::create()</code>","text":"<pre><code>use Erilshk\\Sisp\\Billing;\n\n$billing = Billing::create([\n    'email' =&gt; 'user@mail.com',\n    'country' =&gt; '132',               // C\u00f3digo do pa\u00eds (CVE)\n    'city' =&gt; 'Praia',\n    'address' =&gt; 'Achada Santo Ant\u00f3nio',\n    'postalCode' =&gt; '7600',\n    'mobilePhone' =&gt; '9911122',\n]);\n</code></pre> <p>\ud83d\udca1 <code>create()</code> \u00e9 \u00fatil quando voc\u00ea j\u00e1 tem todos os dados em um array e quer gerar rapidamente o array final para enviar ao SDK.</p>"},{"location":"billing/#exemplo-completo-usando-billingmake-com-chaining","title":"\ud83d\udd39 Exemplo completo usando <code>Billing::make()</code> com chaining","text":"<pre><code>$billing = Billing::make()\n    -&gt;email('user@mail.com')\n    -&gt;country('132')\n    -&gt;city('Praia')\n    -&gt;address('Achada Santo Ant\u00f3nio')\n    -&gt;address2('Bloco B, Apt 10')\n    -&gt;postalCode('7600')\n    -&gt;state('01')\n    -&gt;shipAddress('Rua de Entrega, 45')\n    -&gt;shipCity('Praia')\n    -&gt;shipPostalCode('7601')\n    -&gt;mobilePhone('238', '9911122')\n    -&gt;workPhone('238', '2612345')\n    -&gt;acctID('123456')\n    -&gt;acctInfo([\n        'chAccAgeInd' =&gt; '05',\n        'chAccChange' =&gt; '20230101',\n        'chAccDate' =&gt; '20220101',\n        'chAccPwChange' =&gt; '20230201',\n        'chAccPwChangeInd' =&gt; '05',\n        'suspiciousAccActivity' =&gt; '01',\n    ])\n    -&gt;addrMatch(true)\n    -&gt;suspicious(false)\n    -&gt;toArray();\n</code></pre> <p>\ud83d\udca1 Nota: <code>make()</code> permite encadear m\u00e9todos e preencher apenas os campos desejados, gerando o array final com <code>toArray()</code>. \u00c9 ideal para cen\u00e1rios din\u00e2micos, como capturar dados do usu\u00e1rio a partir de formul\u00e1rios.</p>"},{"location":"billing/#campos-importantes-de-3ds","title":"\ud83d\udd39 Campos importantes de 3DS","text":"Campo Tipo Obrigat\u00f3rio Descri\u00e7\u00e3o <code>email</code> string Sim Email do titular do cart\u00e3o <code>billAddrCountry</code> string (ISO 3166-1 num\u00e9rico) Sim Pa\u00eds do endere\u00e7o de cobran\u00e7a <code>billAddrCity</code> string Sim Cidade de cobran\u00e7a <code>billAddrLine1</code> string Sim Endere\u00e7o principal <code>billAddrLine2/3</code> string N\u00e3o Endere\u00e7os secund\u00e1rios <code>billAddrPostCode</code> string Sim C\u00f3digo postal <code>billAddrState</code> string N\u00e3o C\u00f3digo do estado/regi\u00e3o <code>shipAddr*</code> string N\u00e3o Endere\u00e7o de entrega, opcional <code>mobilePhone</code> objeto N\u00e3o <code>{ cc, subscriber }</code> <code>workPhone</code> objeto N\u00e3o <code>{ cc, subscriber }</code> <code>acctID</code> string Recomendado ID da conta do usu\u00e1rio <code>acctInfo</code> objeto Recomendado Informa\u00e7\u00f5es da conta do usu\u00e1rio (chAccAgeInd, chAccChange, etc.) <code>suspicious</code> bool Opcional Marca atividade suspeita do usu\u00e1rio <code>addrMatch</code> string Y/N Opcional Endere\u00e7o de cobran\u00e7a e entrega coincidem"},{"location":"billing/#fluxo-de-billing-com-sdk","title":"\ud83d\udd39 Fluxo de Billing com SDK","text":"<pre><code>flowchart LR\n    S[Billing] --&gt; A[\"Billing::create([...])\"]\n    S --&gt; AA[\"Billing::make()\"]\n\n    A --&gt; B[\"Vinti4Net::preparePurchasePayment(...)\"]\n    AA --&gt; AB[chaining]\n    AB  --&gt; ABA[methods] --&gt; AB\n\n    AB --&gt; AC[\"toArray()\"]\n    AC --&gt; B\n\n    B --&gt; C[\"Vinti4Net::createPaymentForm(responseUrl)\"]\n    C --&gt; D[\"Envio ao SISP / 3DS Server\"]</code></pre>"},{"location":"installation/","title":"\u2699\ufe0f Installation","text":"<p>Instale facilmente via Composer:</p> <pre><code>composer require erilshk/vinti4net\n</code></pre>"},{"location":"installation/#requisitos-do-sistema","title":"\ud83d\udda5\ufe0f Requisitos do Sistema","text":"<p>Antes de usar o SDK, certifique-se de que o seu ambiente atende aos seguintes requisitos:</p> <ul> <li>\ud83d\udd39 PHP 8.1 ou superior  </li> <li>\ud83d\udd39 Extens\u00f5es PHP obrigat\u00f3rias: </li> <li><code>json</code> </li> <li><code>mbstring</code> </li> </ul> <p>\u26a0\ufe0f Nota: Se alguma extens\u00e3o estiver faltando, o SDK poder\u00e1 n\u00e3o funcionar corretamente. No Linux, voc\u00ea pode instalar via <code>apt</code> ou <code>yum</code> (ex.: <code>sudo apt install php-mbstring php-json</code>).</p>"},{"location":"installation/#dica-rapida","title":"\u2705 Dica r\u00e1pida","text":"<p>Para verificar sua vers\u00e3o do PHP e extens\u00f5es instaladas:</p> <pre><code>php -v\nphp -m | grep -E \"json|mbstring\"\n</code></pre>"},{"location":"payments/","title":"Purchase Payment (3DS)","text":"<p>Use este m\u00e9todo para compras normais com cart\u00e3o Vinti4:</p> <pre><code>$sdk-&gt;preparePurchase(\n    amount: 1500,\n    billing: Billing::create($dadosDeFaturacao),\n    currency: 'CVE'\n);\n</code></pre>"},{"location":"payments/#service-payment","title":"Service Payment","text":"<pre><code>$sdk-&gt;prepareServicePayment(\n    amount: 2000,\n    entity: 341,\n    number: \"123456789\"\n);\n</code></pre>"},{"location":"payments/#recharge-payment","title":"Recharge Payment","text":"<pre><code>$sdk-&gt;prepareRecharge(\n    amount: 500,\n    entity: 341,\n    number: \"987654321\"\n);\n</code></pre>"},{"location":"quickstart/","title":"Quick Start","text":""},{"location":"quickstart/#1-criar-instancia","title":"1. Criar inst\u00e2ncia","text":"<pre><code>use Erilshk\\Sisp\\Vinti4Net;\n\n$sdk = new Vinti4Net(\n    posID: \"1234\",\n    posAuthCode: \"SECRETO\",\n);\n</code></pre>"},{"location":"quickstart/#2-preparar-pagamento","title":"2. Preparar pagamento","text":"<pre><code>$billing = [\n    'email' =&gt; 'cliente@email.com',\n    'billAddrCountry' =&gt; '132',\n    'billAddrCity' =&gt; 'Cidade',\n    'billAddrLine1' =&gt; 'endere\u00e7o',\n    'billAddrPostCode' =&gt; '7601',\n];\n\n$sdk-&gt;preparePurchase(1000, $billing);\n</code></pre>"},{"location":"quickstart/#3-gerar-formulario-auto-submit","title":"3. Gerar formul\u00e1rio auto-submit","text":"<pre><code>echo $sdk-&gt;createPaymentForm(\"https://meusite.com/callback\");\n</code></pre>"},{"location":"quickstart/#4-processar-callback","title":"4. Processar callback","text":"<pre><code>$response = $sdk-&gt;processResponse($_POST);\n\nif ($response-&gt;isSuccess()) {\n    // OK\n}\n</code></pre>"},{"location":"refunds/","title":"\ud83d\udcb8 Refunds","text":"<p>Para reembolsar uma transa\u00e7\u00e3o existente, use o m\u00e9todo:</p> <pre><code>$vinti4-&gt;prepareRefund(\n    amount: 1000,                  // \ud83d\udcb0 Valor a reembolsar\n    merchantRef: \"PED123\",         // \ud83c\udff7\ufe0f Refer\u00eancia original do merchant\n    transactionID: \"TX119922\",     // \ud83c\udd94 ID da transa\u00e7\u00e3o SISP\n    clearingPeriod: \"1125\"         // \ud83d\udcc5 Per\u00edodo de compensa\u00e7\u00e3o obrigat\u00f3rio\n);\n</code></pre> <p>\u26a0\ufe0f Nota: guarde esses dados</p> <p><code>clearingPeriod</code> \u00e9 o Per\u00edodo Contabil\u00edstico em que a transa\u00e7\u00e3o se realizou, e  \u00e9 enviado na resposta pela SISP no pagamento <code>merchantRespCP</code>.</p> <p><code>Transaction ID</code> da transa\u00e7\u00e3o Original, que \u00e9 enviado na  resposta pela SISP no par\u00e2metro <code>merchantRespTid</code>.</p> <p>juntos identificam unicamente uma transa\u00e7\u00e3o na rede vinti4.</p>"},{"location":"refunds/#fluxo-de-reembolso","title":"\ud83d\udd39 Fluxo de Reembolso","text":"<pre><code>graph LR\n\n    A[\"Merchant\"] --&gt; B[\"prepareRefundPayment()\"]\n    B --&gt; C[\"createPaymentForm()\"]\n    C --&gt; D[\"SISP\"]\n    D --&gt; E[\"Callback\"]\n    E --&gt; F[\"processResponse()\"]</code></pre>"},{"location":"responses/","title":"\ud83d\udce6 Vinti4Response","text":"<p>Todas as respostas processadas pelo SDK retornam um objeto padr\u00e3o <code>Vinti4Response</code>. Ele unifica e interpreta todas as respostas do SISP, incluindo sucesso, erros, cancelamentos e problemas de fingerprint.</p>"},{"location":"responses/#exemplo-de-uso","title":"\ud83d\udd39 Exemplo de uso","text":"<pre><code>$response = $sdk-&gt;processResponse($_POST);\n\nif ($response-&gt;isSuccess()) {\n    echo \"Transa\u00e7\u00e3o aprovada! ID: \" . $response-&gt;getTransactionId();\n} elseif ($response-&gt;isCancelled()) {\n    echo \"Transa\u00e7\u00e3o cancelada pelo usu\u00e1rio.\";\n} elseif ($response-&gt;hasInvalidFingerprint()) {\n    echo \"Problema de seguran\u00e7a: fingerprint inv\u00e1lido.\";\n}\n\n$data = $response-&gt;toArray();   // Array completo\n$json = $response-&gt;toJson();   // JSON formatado\n</code></pre>"},{"location":"responses/#principais-metodos","title":"\ud83d\udd39 Principais m\u00e9todos","text":"M\u00e9todo Descri\u00e7\u00e3o <code>isSuccess()</code> Retorna <code>true</code> se a transa\u00e7\u00e3o foi conclu\u00edda com sucesso. <code>isCancelled()</code> Retorna <code>true</code> se o usu\u00e1rio cancelou a transa\u00e7\u00e3o. <code>hasInvalidFingerprint()</code> Retorna <code>true</code> se houve problema de fingerprint. <code>getTransactionId()</code> Retorna o ID da transa\u00e7\u00e3o no SISP. <code>getClearingPeriod()</code> Retorna o Period contabilistico em que a transa\u00e7\u00e3o se relizou. <code>getMerchantRef()</code> Retorna a refer\u00eancia do merchant. <code>getAmount()</code> Retorna o valor da transa\u00e7\u00e3o. <code>getCurrency()</code> Retorna a moeda da transa\u00e7\u00e3o. <code>toArray()</code> Retorna todos os dados da resposta como array. <code>toJson()</code> Retorna todos os dados da resposta como JSON formatado."},{"location":"responses/#estrutura-do-objeto","title":"\ud83d\udd39 Estrutura do objeto","text":"<pre><code>classDiagram\n    class Vinti4Response {\n        +string status\n        +string message\n        +bool success\n        +array data\n        +array dcc\n        +array debug\n        +string detail\n        +isSuccess()\n        +isCancelled()\n        +hasInvalidFingerprint()\n        +getTransactionId()\n        +getMerchantRef()\n        +getAmount()\n        +getCurrency()\n        +toArray()\n        +toJson()\n    }\n\n    Vinti4Response --&gt; data : \"Dados detalhados da transa\u00e7\u00e3o\"\n    Vinti4Response --&gt; dcc : \"Informa\u00e7\u00f5es DCC (Dynamic Currency Conversion)\"\n    Vinti4Response --&gt; debug : \"Informa\u00e7\u00f5es de debug (fingerprint inv\u00e1lido etc.)\"\n    Vinti4Response --&gt; detail : \"Detalhes de erro opcionais\"</code></pre>"},{"location":"responses/#observacoes-importantes","title":"\ud83d\udd39 Observa\u00e7\u00f5es importantes","text":"<ol> <li><code>status</code> pode ser: <code>SUCCESS</code>, <code>CANCELLED</code>, <code>INVALID_FINGERPRINT</code> ou <code>ERROR</code>.  </li> <li><code>dcc</code> cont\u00e9m informa\u00e7\u00f5es sobre Dynamic Currency Conversion, se aplic\u00e1vel.  </li> <li><code>debug</code> ajuda a identificar problemas de seguran\u00e7a (fingerprint).  </li> <li><code>detail</code> fornece informa\u00e7\u00f5es detalhadas de erro retornadas pelo SISP.  </li> </ol>"}]}